<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>香川旅行のしおり（2/21-2/23）</title>
  <style>
    :root {
      --bg1: #fff8f0;
      --bg2: #f2f8ff;
      --ink: #3e3a53;
      --muted: #6f6b82;
      --card: rgba(255,255,255,.88);
      --line: #e7defb;
      --accent: #ff7d7d;
      --accent2: #6a91ff;
      --ok: #248a62;
      --warn: #b96b00;
      --shadow: 0 14px 30px rgba(74, 59, 122, .12);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Hiragino Maru Gothic ProN", "M PLUS Rounded 1c", "Yu Gothic", "Meiryo", sans-serif;
      color: var(--ink);
      background:
        radial-gradient(circle at 12% 12%, rgba(255,172,154,.34) 0, rgba(255,172,154,0) 36%),
        radial-gradient(circle at 90% 2%, rgba(152,194,255,.35) 0, rgba(152,194,255,0) 30%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      min-height: 100vh;
      position: relative;
    }
    body::before, body::after {
      content: "";
      position: fixed;
      border-radius: 999px;
      pointer-events: none;
      z-index: -1;
      filter: blur(2px);
    }
    body::before {
      width: 320px;
      height: 320px;
      left: -130px;
      top: 55vh;
      background: rgba(255, 216, 169, .35);
    }
    body::after {
      width: 300px;
      height: 300px;
      right: -120px;
      top: 35vh;
      background: rgba(173, 205, 255, .28);
    }
    a { color: #3258cb; text-decoration: none; }
    a:hover { text-decoration: underline; }
    header { padding: 24px 16px 8px; max-width: 1120px; margin: 0 auto; }
    h1 { margin: 10px 0 6px; font-size: clamp(24px, 3vw, 34px); line-height: 1.25; }
    .sub { color: var(--muted); font-size: 14px; line-height: 1.65; }
    .hero {
      display: grid;
      grid-template-columns: 1.35fr .65fr;
      gap: 16px;
      overflow: hidden;
      border-radius: 24px;
      position: relative;
      animation: rise .55s ease both;
    }
    .hero::after {
      content: "";
      position: absolute;
      width: 250px;
      height: 250px;
      right: -90px;
      top: -90px;
      border-radius: 999px;
      background: radial-gradient(circle, rgba(255,127,127,.2), rgba(255,127,127,0) 66%);
      pointer-events: none;
    }
    .hero-tags { display:flex; gap: 8px; flex-wrap: wrap; margin-top: 10px; }
    .hero-visual {
      align-self: stretch;
      min-height: 200px;
      border-radius: 20px;
      background: linear-gradient(150deg, #ffedf3, #e9f4ff);
      border: 1px solid #ecdfff;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.8);
      display: grid;
      place-items: center;
    }
    .hero-visual svg { width: 100%; max-width: 300px; height: auto; animation: floaty 4s ease-in-out infinite; }
    .hero-controls { margin-top: 14px; }
    .note {
      color: var(--muted);
      font-size: 13px;
      line-height: 1.7;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px dashed #e6d9ff;
      background: rgba(255,255,255,.66);
      margin-top: 12px;
    }
    .wrap { max-width: 1120px; margin: 0 auto; padding: 12px 16px 48px; }
    .grid { display:grid; grid-template-columns: 1.2fr .8fr; gap: 12px; }
    @media (max-width: 980px){
      .grid { grid-template-columns: 1fr; }
      .hero { grid-template-columns: 1fr; }
      .hero-visual { min-height: 150px; }
    }
    .card {
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 20px;
      padding: 16px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(2px);
      animation: rise .55s ease both;
    }
    .card h2 {
      margin: 0 0 10px;
      font-size: 17px;
      letter-spacing: .01em;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .card h2::before {
      content: "";
      width: 14px;
      height: 14px;
      border-radius: 5px;
      background: linear-gradient(160deg, #ffaca4, #ffc9a0);
      box-shadow: 0 2px 8px rgba(255, 140, 108, .35);
    }
    .badge {
      display:inline-block;
      padding: 6px 11px;
      border-radius: 999px;
      background: linear-gradient(150deg, #ffe7c3, #ffd1c8);
      border: 1px solid #ffc3b2;
      color: #9a4d2c;
      font-weight: 700;
      font-size: 12px;
    }
    .row { display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    .btn {
      cursor:pointer;
      border:1px solid #dcccf9;
      background: #fff;
      color: #4f4763;
      padding: 9px 12px;
      border-radius: 12px;
      font-size: 13px;
      font-weight: 600;
      transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
    }
    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 12px rgba(91, 66, 168, .12);
      background: #fffdfd;
    }
    .btn.primary {
      border-color: #9db8ff;
      background: linear-gradient(145deg, #eff4ff, #e8f0ff);
      color: #2950be;
    }
    .btn.danger {
      border-color: #ffc3c0;
      background: linear-gradient(145deg, #fff2f2, #ffe9e9);
      color: #b64b44;
    }
    table {
      width:100%;
      border-collapse: collapse;
      overflow:hidden;
      border-radius: 14px;
      border:1px solid var(--line);
      background: #fff;
    }
    th,td {
      padding: 11px 10px;
      border-bottom: 1px solid #f2ecff;
      vertical-align: top;
      font-size: 13px;
    }
    th {
      text-align:left;
      background: #fbf8ff;
      color: var(--muted);
      width: 104px;
      font-weight: 700;
    }
    tr:last-child td, tr:last-child th { border-bottom: none; }
    .pill {
      display:inline-block;
      padding: 3px 9px;
      border-radius: 999px;
      font-size: 12px;
      border:1px solid #ded4f9;
      background: #faf7ff;
      color: #6f6790;
    }
    .ok { color: var(--ok); }
    .warn { color: var(--warn); }
    .timeline { display:flex; flex-direction: column; gap: 10px; }
    .item {
      border:1px solid #ebe4fc;
      border-radius: 14px;
      padding: 11px;
      background: linear-gradient(180deg, rgba(255,255,255,.95), rgba(252,248,255,.95));
    }
    .item .top { display:flex; justify-content: space-between; gap:10px; align-items: baseline; }
    .time { font-weight: 700; letter-spacing: .3px; color: #3b4d9e; }
    .title { font-weight: 700; }
    .meta { color: var(--muted); font-size: 12px; margin-top: 6px; line-height: 1.6; }
    .k { color: var(--muted); }
    .hr { height:1px; background: #e8defb; margin: 12px 0; }
    .edit { outline: none; }
    .edit[contenteditable="true"] {
      box-shadow: inset 0 0 0 2px rgba(90,128,236,.25);
      border-radius: 8px;
      padding: 2px 4px;
      background: #f7fbff;
    }
    .small { font-size: 12px; color: var(--muted); }
    .checklist label{
      display:flex;
      gap:10px;
      align-items:flex-start;
      padding: 8px 8px;
      border:1px solid #ebe4fc;
      border-radius: 12px;
      margin: 7px 0;
      background: #fff;
    }
    .checklist input{
      margin-top: 2px;
      accent-color: #ff7d7d;
    }
    .footer { margin-top: 12px; color: var(--muted); font-size: 12px; }
    .two { display:grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    @media (max-width: 720px){ .two{ grid-template-columns: 1fr; } }
    .kbd {
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Noto Sans Mono", monospace;
      font-size: 12px;
      padding: 2px 6px;
      border:1px solid #d7cbf4;
      border-radius: 8px;
      background: #fff;
      color: #514a6b;
    }
    @keyframes rise {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes floaty {
      0%,100% { transform: translateY(0); }
      50% { transform: translateY(-6px); }
    }
  </style>
</head>
<body>
  <header>
    <div class="card hero">
      <div>
        <div class="badge">旅行のしおり</div>
        <h1 class="edit" data-key="title">香川旅行（2/21(土)〜2/23(月)）</h1>
        <div class="sub edit" data-key="subtitle">
          高松センチュリーホテル泊（2/21-22）／移動：レンタカー＋船（直島・女木島）
        </div>
        <div class="hero-tags">
          <span class="pill">うどん旅</span>
          <span class="pill">島アート</span>
          <span class="pill">レンタカー移動</span>
        </div>
        <div class="row hero-controls">
          <button class="btn primary" id="toggleEdit">編集モード：OFF</button>
          <button class="btn" id="copyUrl">このページの共有方法</button>
          <button class="btn" onclick="window.print()">印刷 / PDF</button>
          <button class="btn danger" id="reset">変更をリセット</button>
        </div>
        <div class="note">
          ブラウザで内容を直接編集できます（編集モードON）。変更はこのPC/スマホのブラウザに保存されます。<br/>
          友達と同じ内容を共有したい場合は、後述の「共有方法」どおりに<strong>GitHub Pages等で公開</strong>するとURLで共有できます。
        </div>
      </div>
      <div class="hero-visual" aria-hidden="true">
        <svg viewBox="0 0 340 230" role="img">
          <defs>
            <linearGradient id="sea" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="#a9d6ff" />
              <stop offset="100%" stop-color="#8ac5ff" />
            </linearGradient>
            <linearGradient id="sky" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0%" stop-color="#ffe8cc" />
              <stop offset="100%" stop-color="#ffd6dd" />
            </linearGradient>
          </defs>
          <rect x="20" y="28" width="300" height="174" rx="24" fill="url(#sky)" />
          <circle cx="95" cy="74" r="24" fill="#ffd58f" />
          <path d="M20 150 Q110 120 180 150 T320 148 L320 202 L20 202Z" fill="url(#sea)" />
          <path d="M78 156 C112 112 132 111 160 156 Z" fill="#88b596" />
          <path d="M185 160 C213 120 244 125 267 160 Z" fill="#83ab8c" />
          <circle cx="135" cy="130" r="5" fill="#fff" opacity=".72" />
          <circle cx="152" cy="122" r="3.5" fill="#fff" opacity=".72" />
          <path d="M234 90 q8 -8 16 0" stroke="#fff" stroke-width="3" fill="none" stroke-linecap="round" />
          <path d="M250 90 q8 -8 16 0" stroke="#fff" stroke-width="3" fill="none" stroke-linecap="round" />
          <rect x="84" y="102" width="44" height="26" rx="8" fill="#fff5f2" />
          <path d="M88 124 L106 110 L124 124" fill="none" stroke="#f08e8e" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </div>
    </div>
  </header>

  <div class="wrap">
    <div class="grid">
      <!-- LEFT -->
      <div class="card">
        <h2>確定情報</h2>
        <table>
          <tr>
            <th>行き</th>
            <td class="edit" data-key="flight_out">
              2/21(土) 羽田 07:45 → 高松 09:10
            </td>
          </tr>
          <tr>
            <th>帰り</th>
            <td class="edit" data-key="flight_in">
              2/23(月) 高松 15:25 → 羽田 16:45
            </td>
          </tr>
          <tr>
            <th>宿泊</th>
            <td class="edit" data-key="hotel">
              高松センチュリーホテル（2/21-22）
            </td>
          </tr>
          <tr>
            <th>移動</th>
            <td class="edit" data-key="transport">
              レンタカー（島は基本：港に駐車→人だけ船）
            </td>
          </tr>
          <tr>
            <th>行きたい</th>
            <td class="edit" data-key="wants">
              父母ヶ浜／金刀比羅宮／直島／鬼ヶ島(女木島)大洞窟（可能なら）／うどん複数
            </td>
          </tr>
        </table>

        <div class="hr"></div>

        <h2>ざっくり方針（おすすめ）</h2>
        <div class="timeline">
          <div class="item">
            <div class="top"><div class="title">2/21(土) 空港→山越うどん→金刀比羅宮→父母ヶ浜→高松泊</div><div class="pill">運転：やさしめ</div></div>
            <div class="meta edit" data-key="policy1">
              到着日は陸移動のみで完結。午前に山越うどん（売切れ前）→金刀比羅宮、午後に父母ヶ浜とDOUGHNUT-HOLIC。初心者は「時間より安全優先」で各区間+10分バッファを入れる。
            </div>
          </div>
          <div class="item">
            <div class="top"><div class="title">2/22(日) 直島：予約なしの“軽めアート散策”</div><div class="pill">船：天候注意</div></div>
            <div class="meta edit" data-key="policy2">
              地中美術館は必須にしない。宮浦＋本村＋屋外作品中心で気楽に回す。
            </div>
          </div>
          <div class="item">
            <div class="top"><div class="title">2/23(月) 午前だけ：女木島（鬼ヶ島大洞窟）→ 空港</div><div class="pill">時間厳守</div></div>
            <div class="meta edit" data-key="policy3">
              フライトがあるので午前の短時間に限定。欠航リスクがあれば無理しない。
            </div>
          </div>
        </div>
      </div>

      <!-- RIGHT -->
      <div class="card">
        <h2>リンク集（公式・時刻表など）</h2>
        <div class="note">※1日目で使う公式情報を優先して掲載しています（営業時間は変更されることがあるため出発前に再確認）。</div>
        <ul class="edit" data-key="links" style="line-height:1.9; padding-left: 18px;">
          <li><a href="https://www.yamagoeudon.com/" target="_blank" rel="noopener">山越うどん（公式）</a> <span class="k">…営業時間 9:00-13:30 / 水・日休み、キリンさん駐車場案内</span></li>
          <li><a href="https://www.konpira.or.jp/" target="_blank" rel="noopener">金刀比羅宮（公式）</a> <span class="k">…参拝時間/授与所など</span></li>
          <li><a href="https://www.konpira.or.jp/access/" target="_blank" rel="noopener">金刀比羅宮アクセス（公式）</a> <span class="k">…目的地は神社名ではなく駐車場指定推奨</span></li>
          <li><a href="https://www.kankou-kotohira.jp/spot/entry-116.html" target="_blank" rel="noopener">琴平町営駅前西駐車場</a> <span class="k">…24時間出入庫可 / 1回500円</span></li>
          <li><a href="https://www.mitoyo-kanko.com/chichibugahama/" target="_blank" rel="noopener">父母ヶ浜（観光協会）</a> <span class="k">…干潮/混雑/駐車場案内</span></li>
          <li><a href="https://www.mitoyo-kanko.com/chichibugahama-map/" target="_blank" rel="noopener">父母ヶ浜 駐車場・アクセス図</a> <span class="k">…大屋根駐車場含む現地導線確認</span></li>
          <li><a href="https://www.city.mitoyo.lg.jp/kakuka/seisakubu/kanko_koryu/5/kaigann_hamabe/chichibugahama/5308.html" target="_blank" rel="noopener">三豊市：父母ヶ浜 駐車場案内</a> <span class="k">…自家用車無料（掲載時点）</span></li>
          <li><a href="https://www.hotpepper.jp/strJ001280233/" target="_blank" rel="noopener">DOUGHNUT-HOLIC（営業時間参考）</a> <span class="k">…11:00-17:00 / 金曜休の掲載例</span></li>
          <li><a href="https://www.shikokukisen.com/" target="_blank" rel="noopener">四国汽船（高松⇄直島）</a> <span class="k">…時刻表/運賃/運航情報</span></li>
          <li><a href="https://meon.co.jp/" target="_blank" rel="noopener">雌雄島海運 めおん（高松⇄女木島/男木島）</a> <span class="k">…時刻表/運航情報</span></li>
          <li><a href="https://www.onigasima.jp/" target="_blank" rel="noopener">鬼ヶ島大洞窟（公式）</a> <span class="k">…アクセス/料金/営業時間</span></li>
          <li><a href="https://www.navitime.co.jp/" target="_blank" rel="noopener">NAVITIME（ルート検索）</a> <span class="k">…所要時間の再確認用</span></li>
        </ul>

        <div class="hr"></div>

        <h2>運転の難しさ・注意点（目安）</h2>
        <div class="timeline">
          <div class="item">
            <div class="top"><div class="title">空港〜琴平/三豊（父母ヶ浜）</div><div class="pill ok">走りやすい</div></div>
            <div class="meta edit" data-key="drive1">
              県道・国道主体で比較的走りやすい。右左折前の車線変更を早めに行い、交差点で迷ったら無理に曲がらず一度直進してリルート。
            </div>
          </div>
          <div class="item">
            <div class="top"><div class="title">琴平（参道周辺）</div><div class="pill warn">歩行者多</div></div>
            <div class="meta edit" data-key="drive2">
              参道周辺は歩行者・一方通行が多い。ナビの目的地は「金刀比羅宮」ではなく「琴平町営駅前西駐車場」に設定して、最後は徐行で進入。
            </div>
          </div>
          <div class="item">
            <div class="top"><div class="title">高松市街〜港（サンポート）</div><div class="pill warn">車線変更</div></div>
            <div class="meta edit" data-key="drive3">
              三豊→高松の復路は日没後に重なりやすい。対向車ライトで見えにくいので速度を抑え、疲労が出たらPA/コンビニで5分休憩。
            </div>
          </div>
          <div class="item">
            <div class="top"><div class="title">船（直島/女木島）</div><div class="pill warn">欠航あり</div></div>
            <div class="meta edit" data-key="drive4">
              風が強いと欠航/遅延あり。行く前に運航情報を確認し、帰りは遅い便に寄せすぎない。
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="two" style="margin-top:12px;">
      <div class="card">
        <h2>日別スケジュール（予定表）</h2>
        <div class="note">時間は「目安」です。昼食時間も組み込み済み。必要に応じて書き換えてください。</div>

        <h3 style="margin:12px 0 8px; font-size:14px;">2/21(土) 高松空港 → 山越うどん → 金刀比羅宮 → 父母ヶ浜 → DOUGHNUT-HOLIC → 高松泊</h3>
        <div class="timeline edit" data-key="day1">
          <div class="item">
            <div class="top"><div><span class="time">09:10</span> <span class="title">高松空港 到着</span></div><span class="pill">到着</span></div>
            <div class="meta">レンタカー受取・ナビ設定。初心者は出発前に「有料道路を使う/使わない」を決めておくと運転中に迷いにくい。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">09:45</span> <span class="title">高松空港 → 山越うどん（運転）</span></div><span class="pill">25〜35分</span></div>
            <div class="meta">距離は短め。空港出発直後は交通量が多いので、最初の10分は特に車間を広めに確保。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">10:15</span> <span class="title">山越うどん（キリンさん駐車場）</span></div><span class="pill">営業 9:00〜13:30</span></div>
            <div class="meta">公式案内では水・日休み。駐車場は第1〜3があり「大きなキリン」が目印。人気店なので売切れ/行列を見込んで早め入店。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">11:30</span> <span class="title">山越うどん → 琴平町営駅前西駐車場（運転）</span></div><span class="pill">25〜35分</span></div>
            <div class="meta">県道で右左折が多め。焦って車線変更せず、1本先で曲がるつもりで走ると安全。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">12:05</span> <span class="title">金刀比羅宮（こんぴらさん）</span></div><span class="pill">滞在1.5〜2.5h</span></div>
            <div class="meta">本宮まで785段。参道周辺は歩行者が多い。公式アクセス案内どおり、目的地は神社名ではなく駐車場名をナビ指定。駅前西駐車場は24時間・1回500円。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">14:00</span> <span class="title">昼食（琴平周辺）</span></div><span class="pill">45〜60分</span></div>
            <div class="meta">参道沿いは混雑しやすい。待ちが長い場合は15分で次候補へ切替える運用がおすすめ。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">15:05</span> <span class="title">琴平 → 父母ヶ浜駐車場（大屋根）</span></div><span class="pill">30〜40分</span></div>
            <div class="meta">海沿い手前は観光車両と歩行者が増える。夕景時間帯は駐車待ちが発生しやすいので、余裕を持って到着。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">15:45</span> <span class="title">父母ヶ浜 散策</span></div><span class="pill">60〜90分</span></div>
            <div class="meta">三豊市案内では自家用車駐車場は無料。潮位と日没の条件が良い日ほど混雑するため、長居しない前提で回すと安定。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">17:00</span> <span class="title">DOUGHNUT-HOLIC</span></div><span class="pill">営業目安 11:00〜17:00</span></div>
            <div class="meta">父母ヶ浜から近距離。営業時間は変動があるため当日SNS/電話で最終確認（掲載例では金曜休）。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">17:30</span> <span class="title">DOUGHNUT-HOLIC → 高松センチュリーホテル（運転）</span></div><span class="pill">55〜70分</span></div>
            <div class="meta">走行距離が長い区間。日没後は視認性が落ちるので、追い越しを控えて一定速度で巡航。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">18:40</span> <span class="title">高松センチュリーホテル 到着</span></div><span class="pill">宿泊</span></div>
            <div class="meta">チェックイン後に翌日の船時刻だけ先に確認すると、朝がかなり楽になります。</div>
          </div>
        </div>

        <h3 style="margin:14px 0 8px; font-size:14px;">2/22(日) 直島（予約なし軽め）</h3>
        <div class="timeline edit" data-key="day2">
          <div class="item">
            <div class="top"><div><span class="time">08:00</span> <span class="title">ホテル → 高松港（運転）</span></div><span class="pill">約10〜20分</span></div>
            <div class="meta">市街は車線変更多め。時間に余裕を。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">08:12</span> <span class="title">フェリー：高松 → 直島（宮浦）</span></div><span class="pill">約50分</span></div>
            <div class="meta">例の便。実際の時刻は必ず公式で確認（運航情報も）。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">09:10</span> <span class="title">宮浦周辺＆屋外作品</span></div><span class="pill">〜1.5h</span></div>
            <div class="meta">レンタサイクル/バスを確保してから動くとスムーズ。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">11:00</span> <span class="title">本村エリア散策</span></div><span class="pill">1.5〜2h</span></div>
            <div class="meta">街歩き＋カフェ。混雑次第で調整。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">13:00</span> <span class="title">昼食（島内）</span></div><span class="pill">60分</span></div>
            <div class="meta">ピークを避けるなら少し早め/遅めが楽。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">14:30</span> <span class="title">ベネッセ周辺（屋外作品中心）</span></div><span class="pill">〜2h</span></div>
            <div class="meta">地中美術館は必須にしない前提。気が向いたら当日枠確認。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">17:00</span> <span class="title">フェリー：直島 → 高松</span></div><span class="pill">約50〜60分</span></div>
            <div class="meta">帰りは遅い便に寄せすぎないと安心（欠航/遅延対策）。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">19:00</span> <span class="title">夕食（うどん③）</span></div><span class="pill">60〜90分</span></div>
            <div class="meta">高松市内で締め。翌日は午前勝負。</div>
          </div>
        </div>

        <h3 style="margin:14px 0 8px; font-size:14px;">2/23(月) 女木島（鬼ヶ島）午前 → 空港</h3>
        <div class="timeline edit" data-key="day3">
          <div class="item">
            <div class="top"><div><span class="time">08:30</span> <span class="title">ホテル → 高松港（運転）</span></div><span class="pill">約10〜20分</span></div>
            <div class="meta">出発前に「めおん」の運航情報を確認。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">09:00</span> <span class="title">フェリー：高松 → 女木島</span></div><span class="pill">約20分</span></div>
            <div class="meta">便は例。必ず公式時刻表で調整。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">09:30</span> <span class="title">鬼ヶ島大洞窟</span></div><span class="pill">1.5〜2h</span></div>
            <div class="meta">港↔洞窟の移動（バス/徒歩）込みで計画。混雑や天候で短縮も可。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">11:30</span> <span class="title">高松へ戻る</span></div><span class="pill">午前で撤収</span></div>
            <div class="meta">フライトに向けて早め帰還。欠航リスクがあれば中止も判断。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">12:30</span> <span class="title">昼食（高松）</span></div><span class="pill">45〜60分</span></div>
            <div class="meta">空港へ向かう前に。時間が押したら空港で軽食に切り替え。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">13:30</span> <span class="title">高松市内 → 高松空港（運転）</span></div><span class="pill">30〜50分</span></div>
            <div class="meta">給油→返却→搭乗。渋滞や返却混雑に備えて余裕を。</div>
          </div>
          <div class="item">
            <div class="top"><div><span class="time">15:25</span> <span class="title">高松 → 羽田</span></div><span class="pill">帰路</span></div>
            <div class="meta">お疲れさまでした！</div>
          </div>
        </div>

      </div>

      <div class="card">
        <h2>チェックリスト</h2>
        <div class="note">チェック状態もこのブラウザに保存されます。</div>
        <div class="checklist" id="checklist">
          <label><input type="checkbox" data-check="car"><div><div class="title">レンタカー：免許・予約・保険・チャイルドシート要否</div><div class="small">返却場所／満タン返し／ETCカード有無</div></div></label>
          <label><input type="checkbox" data-check="ship"><div><div class="title">船：直島・女木島の時刻表/運航情報を前日と当日確認</div><div class="small">風が強い日は欠航/遅延の可能性</div></div></label>
          <label><input type="checkbox" data-check="parking"><div><div class="title">港：駐車場場所と料金（サンポート周辺）</div><div class="small">出庫に時間がかかることがある</div></div></label>
          <label><input type="checkbox" data-check="udon"><div><div class="title">うどん：行きたい店候補を3〜5件ピック</div><div class="small">混雑時は“次点”へ即移動できるように</div></div></label>
          <label><input type="checkbox" data-check="cash"><div><div class="title">現金・小銭：フェリーやローカル店で必要な場合あり</div><div class="small">島内の支払い手段は事前確認</div></div></label>
          <label><input type="checkbox" data-check="wear"><div><div class="title">服装：金刀比羅宮は歩く（靴重要）</div><div class="small">雨具／防寒／歩きやすい靴</div></div></label>
        </div>

        <div class="hr"></div>

        <h2>メモ（自由に書き換えOK）</h2>
        <div class="item edit" data-key="memo" style="min-height:120px;">
          ・うどん候補：<br/>
          ・直島はどこまで回る？（宮浦／本村／ベネッセ周辺など）<br/>
          ・2/23は欠航なら市内観光に切り替え（栗林公園など）<br/>
        </div>

        <div class="footer">
          <div>編集のコツ：<span class="kbd">編集モードON</span>→文章をクリックして書き換え。</div>
          <div>このHTMLを公開してURL共有すれば、友達も同じ内容を見られます。</div>
        </div>
      </div>
    </div>
  </div>

<script>
  // Simple localStorage persistence for editable blocks + checklist.
  const STORAGE_KEY = "kagawa_shiori_v1";
  const CHECK_KEY = "kagawa_shiori_checks_v1";

  const toggleBtn = document.getElementById("toggleEdit");
  const resetBtn  = document.getElementById("reset");
  const copyBtn   = document.getElementById("copyUrl");

  let editing = false;

  function setEditable(on){
    editing = on;
    document.querySelectorAll(".edit").forEach(el=>{
      el.setAttribute("contenteditable", on ? "true" : "false");
      if(on) el.classList.add("is-editing");
      else el.classList.remove("is-editing");
    });
    toggleBtn.textContent = `編集モード：${on ? "ON" : "OFF"}`;
  }

  function saveEdits(){
    const data = {};
    document.querySelectorAll(".edit").forEach(el=>{
      const key = el.getAttribute("data-key");
      if(!key) return;
      data[key] = el.innerHTML;
    });
    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
  }

  function loadEdits(){
    const raw = localStorage.getItem(STORAGE_KEY);
    if(!raw) return;
    try{
      const data = JSON.parse(raw);
      Object.entries(data).forEach(([key, html])=>{
        const el = document.querySelector(`.edit[data-key="${CSS.escape(key)}"]`);
        if(el) el.innerHTML = html;
      });
    }catch(e){}
  }

  function saveChecks(){
    const checks = {};
    document.querySelectorAll('#checklist input[type="checkbox"][data-check]').forEach(cb=>{
      checks[cb.dataset.check] = cb.checked;
    });
    localStorage.setItem(CHECK_KEY, JSON.stringify(checks));
  }

  function loadChecks(){
    const raw = localStorage.getItem(CHECK_KEY);
    if(!raw) return;
    try{
      const checks = JSON.parse(raw);
      document.querySelectorAll('#checklist input[type="checkbox"][data-check]').forEach(cb=>{
        cb.checked = !!checks[cb.dataset.check];
      });
    }catch(e){}
  }

  toggleBtn.addEventListener("click", ()=>{
    setEditable(!editing);
  });

  document.addEventListener("input", (e)=>{
    if(!editing) return;
    if(e.target.closest(".edit")) saveEdits();
  });

  document.querySelectorAll('#checklist input[type="checkbox"]').forEach(cb=>{
    cb.addEventListener("change", saveChecks);
  });

  resetBtn.addEventListener("click", ()=>{
    if(confirm("このブラウザに保存した変更をリセットします。よろしいですか？")){
      localStorage.removeItem(STORAGE_KEY);
      localStorage.removeItem(CHECK_KEY);
      location.reload();
    }
  });

  copyBtn.addEventListener("click", async ()=>{
    const msg =
`共有のおすすめ（かんたん）：
1) このHTMLをGitHubに置く（無料）
2) GitHub PagesをONにしてURL発行
3) そのURLをLINEで送る

いま開いているURLが https で公開済みなら「URLをコピー」して送ればOKです。
ローカル（file://）で開いている場合は、まず公開が必要です。`;

    try{
      await navigator.clipboard.writeText(msg);
      alert("共有手順をクリップボードにコピーしました。LINEに貼り付けて送れます。");
    }catch(e){
      alert(msg);
    }
  });

  // Initial load
  loadEdits();
  loadChecks();
  setEditable(false);
</script>
</body>
</html>
